language: java
sudo: required
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: J5SD2+ANLk+L/2swCVotD3z9ijMjkKy8cMNlqwICl8bunI6sXs8uPOmQqOd57CJMfFYV0XEQAvzEUo4iknrqrXtdVSHEH1D4bDvH0iRP457jNOvweLbzos890CtCZUiLrs8kLAqXwCgjQPNFSRFd7uc/UFGEuPRS7FiX2pHnWVYsYxAFxMuRPMhnxWjzF1K0OCbrtBtOMRC/QMTxSA/Q1BCy0fbrPEY3MnuTwbQdYejIpAs+kDD2wrzFEFqR/EHWn6DnrYADEjHkCyTHHfRB/6r8tMedW8OUAaOD5rc7dchEhRgPQyj+RaR18WaS8pIBYgB2QlQDYsOD2DhdHWbvNFw6VpuK3RiR92JWZ/o16Gf2DKLjIfWmbe3N9aZWIdghrzlzGqhQS0SDWBnXrN/Vo23srarnnj2xmZOfNtDfgwz3lvfcgYPhuPEbQOc1iC7bpJ/Qvz/wRgsoPqQjNFouwarHXF95m68Nx7wDWGY6sfxPzITbgktNaC8fm8rrfN3ZjWysvOn+KtTcNbN0KHwAJlO0PeVONZDIUsqZQ8mOEUiR4W9v8VCBmQQK8uf24oT6FVN93DfxHOpb3IM/4dOMClVdD8Gb86t23y8ylV2cmz5TvOj6pA99zgrDG0tIFbmEEIIPHcLfLvgJ79Fy9hHDKqGws4/a6zG4rVp2U2lpAk4=
  - secure: WvuPXnvGWpTWKuLDkLZXdSXj+F6uEbwo7jqcAQEOOpTFdn8Cc3Xf0pTKWsOe/2/eXNL5/o/JKVevP/Cq6qMksmi9icGZmHRa+jwMNysBXZJSmuiyR1XaACQPdOJ2CcVRseGocsREyKH9H04z4031bazpQ/7zMAtB0p0kK2qjTZe2mws193yM3gPFfceQOd93lMNaDXLuu+H35d9XGgwikqX80SGZ8N/UTizSQ44EiWN9ooqTt4/ltNPLEWQdJ7NMd6+d4KANERLNbQ9eXT4cyNf4fq+T9KYEz0e4zwo3TKjsENF1lRsDtGsGsdyn7dGAFa69DZ92MBNEUOPZxQyd4wO5DOfdY1vpxNeQNwQ1eRAoZFySBzsDsKhXSWi5wSMnr2xN98KgLo7r50ZiYQFsifqNvstFLA0VAbqo0pp5LDOI5u1gbQYA3WULMWMUokSH3Gw2HRpcXv97A8KCmoveFbLAQCUgyf6O428vGUxaX6t6kqXGCwaMOnPnhLK5oB0dg9U0T7vLeK2fKhkGIU8uOgXFyHjvdqq2J2AiyvAJkzb3LalfvhA4U4sNAbmz5Gkmma8/kFPKWH8dR5Zd11WZ9eqZLiLmZojTZEIz09bkKozSQ7VRSvgrpYDiSO97Nim5sc/QYvNP+HVmoXMCsXn4Q+r6wsa+dpmObnvZMRR+Hpo=
  - secure: OygAG0WzesKbxJZOmEf878Ua4dtEDgfnalFSwM44M4VSphXblbmnwPeyPPYsDTY+CsNvdwN91y+IaChlcVzfsJdp/fLb1QA+BB2ayKbQoiMsQTZTdT4VIWEHJgr5LBG6oUCUOcTJuVo6n0UWVrJdPmCjm9VyKVdeJSvCDkqZjJyEnDONwqZ3AasaFhtYsI5iefLtCe6RJ7fte3hWhV9fob4+cdJp5YrYoH5i0DZ39r+YdcYgQs0KM/xbFZMxGF2odbWcVzy2+kdhjBSTQCsEzxYPv+iggZKXAP0jhMkXWoni+TVQCWJLhdFRzid+x2wbknFf20BZ3kft9f9Vanex2nKP0ncwFYxnfY/LEG9UrUmShGoHcA5MhZl0JOjrFlakfaBZ1RUqSPzr/7ZQmb76TUS7KvxKjmlsW4G688O42jiujuZYJcKxsivegrl9DkG6h4UudjxjquCA1iqigjjnIscv4u+gMtFubTdeiPb5axSlpNonMjGck60bXQW1pgr8csSLFrt7g7OhS+c2xcE4+gWIzciBoFNYCLMLa9r78IjSijAVF0U+g3jdsZd8srIQgyp8vivM4obnNcVAeaa99NcUgjH+9HPzrHZBe/GCDJAtjMTDm0w6haDDSFXfX/5NXh9DiYemk2nQltcB2OI4eBrhtjEP93MPhZSEAMLV3wk=
  - secure: JFWwyipRF4lgCCDxmk8cNabREvo8RnZwtZ1HwhTlYy/FLDkWHQwu0koMEX+r1TlDWZZOnlakKu/ybkb/otAM1MdX/yD5XsgpU/sA4imy0bkccWXbMHpHpRihbdMuxQQPj+RaSqmqDnFlt5/X2EDjeVWqO3u8+k+ZrF/uLI4YG+JIfIJ/5TfBk+xC8yXNW5Haw1l2uN6SoHToE93FSbGTLUdwo6NJTAo/O1/zpPDZ/Dob536BMZFUImiLEjxtiaPv5Jp7nKg3YC7mSI3+8qWcFKPxdDmM4xLK0J/VR7bc+ZQWAPnaeNfCavMYHwIwUV/KMrAL+3kZIwvh9wQe84W5OGxcUrrDaB2H8H4cmMUS1EHci4la7aO5fdCErN6FUq8b63viPVHHX8042MkeeyUheXFwGh4Jggb2BQVmi71qNipMgwyrGEBHtut6/Q3epHPf1aCB+UB8rFcL/eaA/xhx0UGoUWpHPfEgCBfAthpkVaGbWnhDQPq73c/tqbGy+pN1lW93qzvoDEmrCYekvQPXzyYlyXGBep0jsjejEFHRsdeqB200Ze63wTBGbHrYEwl6VHit2jEr/mimeCtxxSJmNJYY/DMp7E3br/Uynx1Uy3GqDyLPmtGYaSaSDKlUT/QHsSPOG9fNRn3meF7+8G1NdZkvjxe8N/Wqw7/Le4Xtr90=
  - secure: OS14jzhk74F5hNvYU20ezW+1hua/ng5vTHCtZf7uqH+PCeQtGwUzRnV5MOJ/3qNEK7ojrXSaqNdT+NORqvVlDZy7RAZ0VIAbzXHqx9+qZv1RXO22o8jccHoD77LmEoxqcpk6neUEs2L845JqZmHJ2AOatDx6B7VxEOkCGfqsg1OrGaoPdFqL4z9JOJfmA1a6hYriV8vRlkDcBetFOwz8pslnKZVpy62J9mJY5c0Q0BPoobaoBH8VT5ioJ8HBijW8gGyC5mz6kpkSQjp1ETsVJr6WdjFwDeNdWTojVHYqNnhVlPi2WcUV/LoWcse3hKh1GOElFfT7s4B2pPF2ImA8g0xowAdSG/YxDgxK0VjwOM9+ld2zLmcf1iHD7u/QJyJGEK28SHPHvLMPQrLMfSLdYCnDeHOWriMvbRfaEzvKRnV6YUq3G9tlg9r1r6vYpp0LPO9vUnxyZEubJjfDiQqT6FGY80tGl04B7v8fUwvK2ZpPoF8sHR0B0Ssthyku2dfAxMXekDrhFbIkCmA6UxKl/ZpsVn0BHzf4ix+1jkzCSLanduo6MNwO+wiIXSTU2tPS1onHtQcVwPm7yuujfbHe7j0THb1MsMSYe69r9EApHZcnfLnxxBqdQ58zR0orgLaWviNhhScQlrb4dpQE3k+38toECtzyOQlMl2SPwJ3+oLI=
before_install:
- mvn install:install-file -DgroupId=com.PDFjet -DartifactId=PDFjet -Dversion=1.0 -Dfile=./lib/PDFjet-1.0.jar -Dpackaging=jar -DgeneratePom=true
- mvn install:install-file -DgroupId=com.javaplanner -DartifactId=javaplanner -Dversion=1.5 -Dfile=./lib/javaplanner-1.5.jar -Dpackaging=jar -DgeneratePom=true
- export TZ=Pacific/Noumea
- git clone -b travis `git config --get remote.origin.url` target/travis
install: mvn install -DSkipTests=true -Dmaven.javadoc.skip=true -DcreateChecksum=true --settings target/travis/settings.xml
script:
- mvn versioneye:update test jacoco:report
after_success:
- mvn coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: l3eMBQvWIyRjgn1Y2Z5hzcylPn9vJG0cQUGmfbpvMZCMD0RgV9V5ZjsEAMc5ZtYp/H1HlcfdNVc5sHjlaxQ+5rwmHhTWNow/pOXyBjtbdqEdsL2CdTQcxf74Zj3uJZMFNlKi5eSCSHDd2qfeZoTQTc3M6iq71SFUD0N5vnl+6sTxenVPy27x9AHf4c7hAiBJivHLDKB+Vsol+ARuSvEMPMyVPEEbGhona8a9J+xVkA5Ur+SfmkmgJttWPmImjOIIq6eVhBdjBnMonaWbhrscfKvSHZEPgj+eo2ZK2o/MxDp3uhwk6CxQZxm+a2ss9PvV1nQ9+pCiMqu1ZabogeZ3b0J+8YfO2LT7KYJEWIcFRK+fwC/ZLPCrKhnsDFP4YTTcD6Fp9NkGj0j+H6+0RYi0My871rZfqS96EHpEw7cLkPwtnbh4/YBmeA5yDQ5mR3F+iW2f70OhuqJC+MAitnfgXPKzEI7cti9zcEduttQZBK8u061KnbDtsz/aZLMDapXxMQKvYogkTRaDPNqZ11syvRuKFkzNINFQ8QV+wBpSDqmujozLrF350PtueDfVNAOH7/ple3HQBalKenNjpU900B+U6ZAF2H4Q+DaTUJr5PasndryXvKeMGVi71+RVx+O/KXKclUvh8KjiEQGoGoXYWzNlW3q04QvJo4PDteAn974=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  on:
    tags: true
    repo: DSI-Ville-Noumea/sirh-kiosque-j2ee
notifications:
  slack:
    secure: KBYV56f2yQ83IkutVFWA6Jj7vjrEmTssNIgw1govwfSqQ8Co3Da8SlT2B8T/qGkVD4shwtEj6lSeJVCSQjWVFK7xXdMkK4CTvVXZH7qE4nIFCWJdS0oClnmR3raaBw7ZkIh2ac+GG0/5+NouMhL6zCbfNk+l3hzv7J3cF36R6SMdxwaRG8Z6NKkDcLPISzUGyzr/iXSMhvO8WrSMy/0QyM2z4O4OIcK6OoEKhk50mbDrSRQ0deCbLFv5vByfOSAgSogkP+Iv+6r+F4cBA7z5o9LeNiQWqfCWTZ+7SWqIV09AD0vpJB6YabqwX6vyr9MgVlv8i0b7aM6w8l6dCtzKOSVwhu9BUjfyglEHh1Noom/eROjC7YD0r6y8JDd15fFRPQiOxjMISemys/nwi63aNIUSiULmnY4WuYQl0gJPDvJ/qa3AKV58nTyeOrEjg+CBaPkTDPAsNxS8oITSJOPdK2+iLq9UwbX3VZLhh0GZb3r8MvBKqAUja3OpHbV8RMbQ70JSOCWFJnRr91xoOiSpLE+tgW7BcmbumywbqlS7eazaxC3EjLZlWBAdF5h6fHniafk0hiIujdc+wQPwDb9VRuWKvipCAMxX5N1FgYDuov7N4t9RqNC2NtYrYPO45PI8LVMvv5PfYTwGdgJWQtQtcW//vbyDHI04i6OGFgX7jG8=
